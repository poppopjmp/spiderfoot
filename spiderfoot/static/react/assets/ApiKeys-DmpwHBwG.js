import{c as f,b as w,r as a,u as v,d as y,j as e,P as g,C as k,K as C,E as K,T as P,k as d}from"./index-OVAqLjZg.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=f("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function E(){const l=w(),[u,m]=a.useState(!1),[x,o]=a.useState(""),[i,p]=a.useState(""),[r,j]=a.useState(new Set),{data:n,isLoading:N}=v({queryKey:["api-keys"],queryFn:d.list}),c=y({mutationFn:s=>d.create({name:s}),onSuccess:s=>{l.invalidateQueries({queryKey:["api-keys"]}),p(s.key||s.api_key||"Created successfully"),o("")}}),b=y({mutationFn:s=>d.revoke(s),onSuccess:()=>l.invalidateQueries({queryKey:["api-keys"]})}),h=(n==null?void 0:n.keys)??[];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"API Keys"}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>m(!0),children:[e.jsx(g,{className:"h-4 w-4"})," Generate Key"]})]}),i&&e.jsx("div",{className:"card mb-4 border border-green-600 bg-green-900/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-400 font-medium text-sm",children:"API Key Created"}),e.jsx("p",{className:"text-xs text-dark-400 mt-1",children:"Copy this key now — it won't be shown again."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-dark-900 px-3 py-1 rounded text-sm text-white font-mono",children:i}),e.jsx("button",{className:"text-spider-400 hover:text-spider-300",onClick:()=>navigator.clipboard.writeText(i),children:e.jsx(k,{className:"h-4 w-4"})})]})]})}),u&&e.jsxs("div",{className:"card mb-4 border border-spider-600",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Generate New API Key"}),e.jsxs("form",{className:"flex gap-3",onSubmit:s=>{s.preventDefault(),c.mutate(x)},children:[e.jsx("input",{className:"input-field flex-1",placeholder:"Key name (e.g. CI Pipeline, Grafana)",value:x,onChange:s=>o(s.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:c.isPending,children:c.isPending?"Creating...":"Create"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>m(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Active Keys"}),N?e.jsx("p",{className:"text-dark-400",children:"Loading..."}):h.length>0?e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-dark-400 border-b border-dark-700",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Name"}),e.jsx("th",{className:"pb-3 font-medium",children:"Key Prefix"}),e.jsx("th",{className:"pb-3 font-medium",children:"Created"}),e.jsx("th",{className:"pb-3 font-medium",children:"Last Used"}),e.jsx("th",{className:"pb-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-dark-700",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-dark-700/50",children:[e.jsxs("td",{className:"py-3 text-white flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-spider-400"})," ",s.name]}),e.jsxs("td",{className:"py-3",children:[e.jsx("code",{className:"text-dark-300 font-mono text-xs",children:r.has(s.id)?s.prefix+"...":"••••••••"}),e.jsx("button",{className:"ml-2 text-dark-400 hover:text-white",onClick:()=>{const t=new Set(r);t.has(s.id)?t.delete(s.id):t.add(s.id),j(t)},children:r.has(s.id)?e.jsx(S,{className:"h-3 w-3 inline"}):e.jsx(K,{className:"h-3 w-3 inline"})})]}),e.jsx("td",{className:"py-3 text-dark-400",children:s.created_at}),e.jsx("td",{className:"py-3 text-dark-400",children:s.last_used||"Never"}),e.jsx("td",{className:"py-3",children:e.jsx("button",{className:"text-red-400 hover:text-red-300",onClick:()=>b.mutate(s.id),children:e.jsx(P,{className:"h-4 w-4"})})})]},s.id))})]}):e.jsx("p",{className:"text-dark-400",children:"No API keys. Generate one to access the REST API programmatically."})]})]})}export{E as default};
//# sourceMappingURL=ApiKeys-DmpwHBwG.js.map

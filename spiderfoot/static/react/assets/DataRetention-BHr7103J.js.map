{"version":3,"file":"DataRetention-BHr7103J.js","sources":["../../../../frontend/src/pages/DataRetention.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { retentionApi } from '../lib/api';\r\nimport { Database, Clock, Trash2, ShieldCheck, Plus, Play, Eye } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function DataRetentionPage() {\r\n  const { data: rules } = useQuery({ queryKey: ['retention-rules'], queryFn: retentionApi.listRules });\r\n  const { data: stats } = useQuery({ queryKey: ['retention-stats'], queryFn: retentionApi.stats });\r\n\r\n  const ruleList = rules?.rules ?? [];\r\n\r\n  const actionBadge = (action: string) => {\r\n    switch (action) {\r\n      case 'delete': return 'badge-critical';\r\n      case 'archive': return 'badge-medium';\r\n      case 'export_then_delete': return 'badge-high';\r\n      default: return 'badge-info';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">Data Retention</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\">\r\n          <Plus className=\"h-4 w-4\" /> Create Rule\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      {stats && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n          <div className=\"card flex items-center gap-3\">\r\n            <Database className=\"h-5 w-5 text-spider-400\" />\r\n            <div>\r\n              <p className=\"text-sm text-dark-400\">Total Rules</p>\r\n              <p className=\"text-xl font-bold text-white\">{stats.total_rules ?? ruleList.length}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"card flex items-center gap-3\">\r\n            <Clock className=\"h-5 w-5 text-blue-400\" />\r\n            <div>\r\n              <p className=\"text-sm text-dark-400\">Last Enforced</p>\r\n              <p className=\"text-xl font-bold text-white\">{stats.last_enforced ?? 'Never'}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"card flex items-center gap-3\">\r\n            <Trash2 className=\"h-5 w-5 text-red-400\" />\r\n            <div>\r\n              <p className=\"text-sm text-dark-400\">Resources Cleaned</p>\r\n              <p className=\"text-xl font-bold text-white\">{stats.total_cleaned ?? 0}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"card flex items-center gap-3\">\r\n            <ShieldCheck className=\"h-5 w-5 text-green-400\" />\r\n            <div>\r\n              <p className=\"text-sm text-dark-400\">Space Freed</p>\r\n              <p className=\"text-xl font-bold text-white\">{stats.space_freed ?? '0 MB'}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Rules */}\r\n      <div className=\"space-y-3\">\r\n        {ruleList.map((r: { id: string; name: string; criteria_type: string; criteria_value: string; action: string; resource_type: string; enabled: boolean }) => (\r\n          <div key={r.id} className=\"card flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className={`p-2 rounded-lg ${r.enabled ? 'bg-spider-600/20' : 'bg-dark-700'}`}>\r\n                <Database className={`h-5 w-5 ${r.enabled ? 'text-spider-400' : 'text-dark-500'}`} />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-medium text-white\">{r.name}</h3>\r\n                <div className=\"flex items-center gap-2 mt-1\">\r\n                  <span className=\"badge badge-info\">{r.resource_type}</span>\r\n                  <span className=\"badge badge-low\">{r.criteria_type}: {r.criteria_value}</span>\r\n                  <span className={`badge ${actionBadge(r.action)}`}>{r.action}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button className=\"text-spider-400 hover:text-spider-300\" title=\"Preview\">\r\n                <Eye className=\"h-4 w-4\" />\r\n              </button>\r\n              <button className=\"text-green-400 hover:text-green-300\" title=\"Enforce now\">\r\n                <Play className=\"h-4 w-4\" />\r\n              </button>\r\n              <span className={`badge ${r.enabled ? 'badge-success' : 'badge-info'}`}>\r\n                {r.enabled ? 'Active' : 'Disabled'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["DataRetentionPage","rules","useQuery","retentionApi","stats","ruleList","actionBadge","action","jsxs","jsx","Plus","Database","Clock","Trash2","ShieldCheck","r","Eye","Play"],"mappings":"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"}
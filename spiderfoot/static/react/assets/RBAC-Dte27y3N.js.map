{"version":3,"file":"RBAC-Dte27y3N.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/user-plus.js","../../../../frontend/src/pages/RBAC.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","import { useQuery } from '@tanstack/react-query';\r\nimport { rbacApi } from '../lib/api';\r\nimport { Shield, UserPlus, Lock, Users } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function RBACPage() {\r\n  const [tab, setTab] = useState<'roles' | 'users' | 'permissions'>('roles');\r\n  const { data: roles } = useQuery({ queryKey: ['rbac-roles'], queryFn: rbacApi.listRoles });\r\n  const { data: permissions } = useQuery({ queryKey: ['rbac-perms'], queryFn: rbacApi.listPermissions });\r\n  const { data: users } = useQuery({ queryKey: ['rbac-users'], queryFn: rbacApi.listUsers });\r\n\r\n  const tabs = [\r\n    { key: 'roles' as const, label: 'Roles', icon: Shield },\r\n    { key: 'users' as const, label: 'Users', icon: Users },\r\n    { key: 'permissions' as const, label: 'Permissions', icon: Lock },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">Access Control (RBAC)</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\">\r\n          <UserPlus className=\"h-4 w-4\" /> Create Role\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-1 mb-6 bg-dark-800 rounded-lg p-1 w-fit\">\r\n        {tabs.map((t) => (\r\n          <button\r\n            key={t.key}\r\n            onClick={() => setTab(t.key)}\r\n            className={`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${\r\n              tab === t.key\r\n                ? 'bg-spider-600 text-white'\r\n                : 'text-dark-300 hover:text-white hover:bg-dark-700'\r\n            }`}\r\n          >\r\n            <t.icon className=\"h-4 w-4\" />\r\n            {t.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Roles tab */}\r\n      {tab === 'roles' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {(roles?.roles ?? []).map((role: { name: string; description: string; permissions: string[] }) => (\r\n            <div key={role.name} className=\"card hover:border-spider-600 border border-transparent transition\">\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"p-2 bg-spider-600/20 rounded-lg\">\r\n                  <Shield className=\"h-5 w-5 text-spider-400\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-semibold text-white capitalize\">{role.name}</h3>\r\n                  <p className=\"text-xs text-dark-400\">{role.permissions?.length ?? 0} permissions</p>\r\n                </div>\r\n              </div>\r\n              <p className=\"text-sm text-dark-300\">{role.description}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Users tab */}\r\n      {tab === 'users' && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">User Role Assignments</h2>\r\n          {users?.users ? (\r\n            <table className=\"w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"text-left text-dark-400 border-b border-dark-700\">\r\n                  <th className=\"pb-3 font-medium\">User</th>\r\n                  <th className=\"pb-3 font-medium\">Role</th>\r\n                  <th className=\"pb-3 font-medium\">Tenant</th>\r\n                  <th className=\"pb-3 font-medium\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-dark-700\">\r\n                {users.users.map((u: { id: string; email: string; role: string; tenant?: string }) => (\r\n                  <tr key={u.id}>\r\n                    <td className=\"py-3 text-white\">{u.email}</td>\r\n                    <td className=\"py-3\"><span className=\"badge badge-info\">{u.role}</span></td>\r\n                    <td className=\"py-3 text-dark-300\">{u.tenant || 'default'}</td>\r\n                    <td className=\"py-3\"><button className=\"text-spider-400 text-sm hover:underline\">Edit</button></td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <p className=\"text-dark-400\">No users configured. Users are auto-provisioned via SSO or API key creation.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Permissions tab */}\r\n      {tab === 'permissions' && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">Available Permissions</h2>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {(permissions?.permissions ?? []).map((perm: string) => (\r\n              <span key={perm} className=\"badge badge-low\">{perm}</span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["UserPlus","createLucideIcon","RBACPage","tab","setTab","useState","roles","useQuery","rbacApi","permissions","users","tabs","Shield","Users","Lock","jsxs","jsx","t","role","_a","u","perm"],"mappings":"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","x_google_ignoreList":[0]}
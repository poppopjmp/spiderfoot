{"version":3,"file":"Webhooks-i5x7jth9.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/send.js","../../../../frontend/src/pages/Webhooks.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { webhookApi } from '../lib/api';\r\nimport { Webhook, Plus, Trash2, Send, CheckCircle, XCircle } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function WebhooksPage() {\r\n  const queryClient = useQueryClient();\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [url, setUrl] = useState('');\r\n  const [events, setEvents] = useState('');\r\n\r\n  const { data, isLoading } = useQuery({ queryKey: ['webhooks'], queryFn: webhookApi.list });\r\n  const { data: deliveries } = useQuery({ queryKey: ['webhook-deliveries'], queryFn: webhookApi.deliveryHistory });\r\n\r\n  const createWebhook = useMutation({\r\n    mutationFn: () => webhookApi.create({ url, events: events.split(',').map(e => e.trim()) }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['webhooks'] });\r\n      setShowCreate(false);\r\n      setUrl('');\r\n      setEvents('');\r\n    },\r\n  });\r\n\r\n  const testWebhook = useMutation({\r\n    mutationFn: (id: string) => webhookApi.test(id),\r\n  });\r\n\r\n  const deleteWebhook = useMutation({\r\n    mutationFn: (id: string) => webhookApi.delete(id),\r\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['webhooks'] }),\r\n  });\r\n\r\n  const webhooks = data?.webhooks ?? [];\r\n  const history = deliveries?.history ?? deliveries?.deliveries ?? [];\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">Webhooks</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\" onClick={() => setShowCreate(true)}>\r\n          <Plus className=\"h-4 w-4\" /> Add Webhook\r\n        </button>\r\n      </div>\r\n\r\n      {showCreate && (\r\n        <div className=\"card mb-4 border border-spider-600\">\r\n          <h3 className=\"text-white font-semibold mb-3\">Create Webhook</h3>\r\n          <form className=\"space-y-3\" onSubmit={(e) => { e.preventDefault(); createWebhook.mutate(); }}>\r\n            <input className=\"input-field\" placeholder=\"https://example.com/webhook\" value={url} onChange={(e) => setUrl(e.target.value)} required />\r\n            <input className=\"input-field\" placeholder=\"Events: scan.started, scan.finished, finding.critical\" value={events} onChange={(e) => setEvents(e.target.value)} />\r\n            <div className=\"flex gap-2\">\r\n              <button type=\"submit\" className=\"btn-primary\" disabled={createWebhook.isPending}>Create</button>\r\n              <button type=\"button\" className=\"btn-secondary\" onClick={() => setShowCreate(false)}>Cancel</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active webhooks */}\r\n      <div className=\"card mb-6\">\r\n        <h2 className=\"text-lg font-semibold text-white mb-4\">Active Webhooks</h2>\r\n        {isLoading ? (\r\n          <p className=\"text-dark-400\">Loading...</p>\r\n        ) : webhooks.length > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            {webhooks.map((w: { id: string; url: string; events: string[]; enabled: boolean }) => (\r\n              <div key={w.id} className=\"flex items-center justify-between p-4 bg-dark-700/50 rounded-lg\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Webhook className=\"h-5 w-5 text-spider-400\" />\r\n                  <div>\r\n                    <p className=\"text-white font-medium text-sm font-mono\">{w.url}</p>\r\n                    <div className=\"flex gap-1 mt-1\">\r\n                      {w.events?.map((e) => (\r\n                        <span key={e} className=\"badge badge-info text-xs\">{e}</span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button className=\"text-spider-400 hover:text-spider-300\" onClick={() => testWebhook.mutate(w.id)} title=\"Test\">\r\n                    <Send className=\"h-4 w-4\" />\r\n                  </button>\r\n                  <button className=\"text-red-400 hover:text-red-300\" onClick={() => deleteWebhook.mutate(w.id)} title=\"Delete\">\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-dark-400\">No webhooks configured.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Delivery history */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-white mb-4\">Delivery History</h2>\r\n        {history.length > 0 ? (\r\n          <div className=\"space-y-2\">\r\n            {history.slice(0, 20).map((d: { id: string; url: string; status: number; event: string; timestamp: string }, i: number) => (\r\n              <div key={d.id || i} className=\"flex items-center justify-between p-3 bg-dark-700/30 rounded-lg text-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {d.status >= 200 && d.status < 300 ? (\r\n                    <CheckCircle className=\"h-4 w-4 text-green-400\" />\r\n                  ) : (\r\n                    <XCircle className=\"h-4 w-4 text-red-400\" />\r\n                  )}\r\n                  <span className=\"text-white\">{d.event}</span>\r\n                  <span className=\"text-dark-400\">â†’</span>\r\n                  <span className=\"text-dark-300 font-mono text-xs\">{d.url}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <span className={`badge ${d.status >= 200 && d.status < 300 ? 'badge-success' : 'badge-critical'}`}>\r\n                    {d.status}\r\n                  </span>\r\n                  <span className=\"text-dark-500 text-xs\">{d.timestamp}</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-dark-400\">No webhook deliveries yet.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["Send","createLucideIcon","WebhooksPage","queryClient","useQueryClient","showCreate","setShowCreate","useState","url","setUrl","events","setEvents","data","isLoading","useQuery","webhookApi","deliveries","createWebhook","useMutation","e","testWebhook","id","deleteWebhook","webhooks","history","jsxs","jsx","Plus","w","Webhook","_a","Trash2","d","i","CheckCircle","XCircle"],"mappings":"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","x_google_ignoreList":[0]}
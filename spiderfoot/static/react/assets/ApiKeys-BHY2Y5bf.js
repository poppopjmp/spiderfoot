import{b as f,r as a,u as w,d as u,j as e,P as v,C as g,K as C,E as K,e as k,T as P,k as d}from"./index-B5cGgTTj.js";function A(){const c=f(),[y,m]=a.useState(!1),[x,o]=a.useState(""),[i,j]=a.useState(""),[r,N]=a.useState(new Set),{data:n,isLoading:p}=w({queryKey:["api-keys"],queryFn:d.list}),l=u({mutationFn:s=>d.create({name:s}),onSuccess:s=>{c.invalidateQueries({queryKey:["api-keys"]}),j(s.key||s.api_key||"Created successfully"),o("")}}),b=u({mutationFn:s=>d.revoke(s),onSuccess:()=>c.invalidateQueries({queryKey:["api-keys"]})}),h=(n==null?void 0:n.keys)??[];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"API Keys"}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>m(!0),children:[e.jsx(v,{className:"h-4 w-4"})," Generate Key"]})]}),i&&e.jsx("div",{className:"card mb-4 border border-green-600 bg-green-900/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-400 font-medium text-sm",children:"API Key Created"}),e.jsx("p",{className:"text-xs text-dark-400 mt-1",children:"Copy this key now — it won't be shown again."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-dark-900 px-3 py-1 rounded text-sm text-white font-mono",children:i}),e.jsx("button",{className:"text-spider-400 hover:text-spider-300",onClick:()=>navigator.clipboard.writeText(i),children:e.jsx(g,{className:"h-4 w-4"})})]})]})}),y&&e.jsxs("div",{className:"card mb-4 border border-spider-600",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Generate New API Key"}),e.jsxs("form",{className:"flex gap-3",onSubmit:s=>{s.preventDefault(),l.mutate(x)},children:[e.jsx("input",{className:"input-field flex-1",placeholder:"Key name (e.g. CI Pipeline, Grafana)",value:x,onChange:s=>o(s.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:l.isPending,children:l.isPending?"Creating...":"Create"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>m(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Active Keys"}),p?e.jsx("p",{className:"text-dark-400",children:"Loading..."}):h.length>0?e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-dark-400 border-b border-dark-700",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Name"}),e.jsx("th",{className:"pb-3 font-medium",children:"Key Prefix"}),e.jsx("th",{className:"pb-3 font-medium",children:"Created"}),e.jsx("th",{className:"pb-3 font-medium",children:"Last Used"}),e.jsx("th",{className:"pb-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-dark-700",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-dark-700/50",children:[e.jsxs("td",{className:"py-3 text-white flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-spider-400"})," ",s.name]}),e.jsxs("td",{className:"py-3",children:[e.jsx("code",{className:"text-dark-300 font-mono text-xs",children:r.has(s.id)?s.prefix+"...":"••••••••"}),e.jsx("button",{className:"ml-2 text-dark-400 hover:text-white",onClick:()=>{const t=new Set(r);t.has(s.id)?t.delete(s.id):t.add(s.id),N(t)},children:r.has(s.id)?e.jsx(K,{className:"h-3 w-3 inline"}):e.jsx(k,{className:"h-3 w-3 inline"})})]}),e.jsx("td",{className:"py-3 text-dark-400",children:s.created_at}),e.jsx("td",{className:"py-3 text-dark-400",children:s.last_used||"Never"}),e.jsx("td",{className:"py-3",children:e.jsx("button",{className:"text-red-400 hover:text-red-300",onClick:()=>b.mutate(s.id),children:e.jsx(P,{className:"h-4 w-4"})})})]},s.id))})]}):e.jsx("p",{className:"text-dark-400",children:"No API keys. Generate one to access the REST API programmatically."})]})]})}export{A as default};
//# sourceMappingURL=ApiKeys-BHY2Y5bf.js.map

import{c as g,b as w,r as c,u as N,d as r,j as e,P as C,W,T as S,l as q,m as F,w as a}from"./index-OVAqLjZg.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=g("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function P(){const o=w(),[f,i]=c.useState(!1),[d,m]=c.useState(""),[x,h]=c.useState(""),{data:n,isLoading:k}=N({queryKey:["webhooks"],queryFn:a.list}),{data:t}=N({queryKey:["webhook-deliveries"],queryFn:a.deliveryHistory}),u=r({mutationFn:()=>a.create({url:d,events:x.split(",").map(s=>s.trim())}),onSuccess:()=>{o.invalidateQueries({queryKey:["webhooks"]}),i(!1),m(""),h("")}}),v=r({mutationFn:s=>a.test(s)}),y=r({mutationFn:s=>a.delete(s),onSuccess:()=>o.invalidateQueries({queryKey:["webhooks"]})}),b=(n==null?void 0:n.webhooks)??[],p=(t==null?void 0:t.history)??(t==null?void 0:t.deliveries)??[];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Webhooks"}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>i(!0),children:[e.jsx(C,{className:"h-4 w-4"})," Add Webhook"]})]}),f&&e.jsxs("div",{className:"card mb-4 border border-spider-600",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Create Webhook"}),e.jsxs("form",{className:"space-y-3",onSubmit:s=>{s.preventDefault(),u.mutate()},children:[e.jsx("input",{className:"input-field",placeholder:"https://example.com/webhook",value:d,onChange:s=>m(s.target.value),required:!0}),e.jsx("input",{className:"input-field",placeholder:"Events: scan.started, scan.finished, finding.critical",value:x,onChange:s=>h(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn-primary",disabled:u.isPending,children:"Create"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>i(!1),children:"Cancel"})]})]})]}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Active Webhooks"}),k?e.jsx("p",{className:"text-dark-400",children:"Loading..."}):b.length>0?e.jsx("div",{className:"space-y-3",children:b.map(s=>{var l;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-5 w-5 text-spider-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm font-mono",children:s.url}),e.jsx("div",{className:"flex gap-1 mt-1",children:(l=s.events)==null?void 0:l.map(j=>e.jsx("span",{className:"badge badge-info text-xs",children:j},j))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-spider-400 hover:text-spider-300",onClick:()=>v.mutate(s.id),title:"Test",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-400 hover:text-red-300",onClick:()=>y.mutate(s.id),title:"Delete",children:e.jsx(S,{className:"h-4 w-4"})})]})]},s.id)})}):e.jsx("p",{className:"text-dark-400",children:"No webhooks configured."})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Delivery History"}),p.length>0?e.jsx("div",{className:"space-y-2",children:p.slice(0,20).map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700/30 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.status>=200&&s.status<300?e.jsx(q,{className:"h-4 w-4 text-green-400"}):e.jsx(F,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{className:"text-white",children:s.event}),e.jsx("span",{className:"text-dark-400",children:"â†’"}),e.jsx("span",{className:"text-dark-300 font-mono text-xs",children:s.url})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`badge ${s.status>=200&&s.status<300?"badge-success":"badge-critical"}`,children:s.status}),e.jsx("span",{className:"text-dark-500 text-xs",children:s.timestamp})]})]},s.id||l))}):e.jsx("p",{className:"text-dark-400",children:"No webhook deliveries yet."})]})]})}export{P as default};
//# sourceMappingURL=Webhooks-i5x7jth9.js.map

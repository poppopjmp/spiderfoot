{"version":3,"file":"SSOSettings-CJAE1cWE.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/toggle-left.js","../../../../frontend/node_modules/lucide-react/dist/esm/icons/toggle-right.js","../../../../frontend/src/pages/SSOSettings.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ToggleLeft = createLucideIcon(\"ToggleLeft\", [\n  [\"rect\", { width: \"20\", height: \"12\", x: \"2\", y: \"6\", rx: \"6\", ry: \"6\", key: \"f2vt7d\" }],\n  [\"circle\", { cx: \"8\", cy: \"12\", r: \"2\", key: \"1nvbw3\" }]\n]);\n\nexport { ToggleLeft as default };\n//# sourceMappingURL=toggle-left.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ToggleRight = createLucideIcon(\"ToggleRight\", [\n  [\"rect\", { width: \"20\", height: \"12\", x: \"2\", y: \"6\", rx: \"6\", ry: \"6\", key: \"f2vt7d\" }],\n  [\"circle\", { cx: \"16\", cy: \"12\", r: \"2\", key: \"4ma0v8\" }]\n]);\n\nexport { ToggleRight as default };\n//# sourceMappingURL=toggle-right.js.map\n","/**\r\n * SpiderFoot SSO Settings Page (admin only)\r\n *\r\n * Full CRUD for SSO providers: OAuth2/OIDC (Keycloak, Azure AD, etc.),\r\n * LDAP, and SAML. Includes group→role mapping configuration.\r\n * Only accessible to users with config:write permission.\r\n */\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Shield,\r\n  Plus,\r\n  Pencil,\r\n  Trash2,\r\n  CheckCircle,\r\n  XCircle,\r\n  Search,\r\n  X,\r\n  AlertCircle,\r\n  ChevronDown,\r\n  Globe,\r\n  Lock,\r\n  Server,\r\n  ToggleLeft,\r\n  ToggleRight,\r\n  ExternalLink,\r\n} from 'lucide-react';\r\nimport { clsx } from 'clsx';\r\nimport api from '../lib/api';\r\n\r\n// ── Types ────────────────────────────────────────────────\r\n\r\ninterface SSOProviderRecord {\r\n  id: string;\r\n  name: string;\r\n  protocol: string;\r\n  enabled: boolean;\r\n  default_role: string;\r\n  allowed_domains: string;\r\n  auto_create_users: boolean;\r\n  attribute_mapping: string;\r\n  group_attribute: string;\r\n  admin_group: string;\r\n  created_at: number;\r\n  updated_at: number;\r\n  // OAuth2 fields\r\n  client_id?: string;\r\n  client_secret?: string;\r\n  authorization_url?: string;\r\n  token_url?: string;\r\n  userinfo_url?: string;\r\n  scopes?: string;\r\n  jwks_uri?: string;\r\n  // LDAP fields\r\n  ldap_url?: string;\r\n  ldap_base_dn?: string;\r\n  ldap_user_filter?: string;\r\n  ldap_group_filter?: string;\r\n  ldap_tls?: boolean;\r\n  ldap_bind_dn?: string;\r\n  ldap_bind_password?: string;\r\n  // SAML fields\r\n  idp_entity_id?: string;\r\n  idp_sso_url?: string;\r\n  sp_entity_id?: string;\r\n  sp_acs_url?: string;\r\n}\r\n\r\nconst PROTOCOLS = ['oauth2', 'ldap', 'saml'] as const;\r\nconst ROLES = ['viewer', 'analyst', 'operator', 'admin'] as const;\r\n\r\nconst PROTOCOL_LABELS: Record<string, string> = {\r\n  oauth2: 'OAuth2 / OIDC',\r\n  ldap: 'LDAP',\r\n  saml: 'SAML 2.0',\r\n};\r\n\r\nconst PROTOCOL_ICON: Record<string, React.ReactNode> = {\r\n  oauth2: <Globe className=\"h-4 w-4 text-blue-400\" />,\r\n  ldap: <Server className=\"h-4 w-4 text-green-400\" />,\r\n  saml: <Lock className=\"h-4 w-4 text-purple-400\" />,\r\n};\r\n\r\nconst PROTOCOL_COLOR: Record<string, string> = {\r\n  oauth2: 'bg-blue-500/15 text-blue-400 border-blue-500/30',\r\n  ldap: 'bg-green-500/15 text-green-400 border-green-500/30',\r\n  saml: 'bg-purple-500/15 text-purple-400 border-purple-500/30',\r\n};\r\n\r\n// ── Helpers ──────────────────────────────────────────────\r\n\r\n// Keycloak default template\r\nconst KEYCLOAK_DEFAULTS = {\r\n  authorization_url: 'https://keycloak.example.com/realms/master/protocol/openid-connect/auth',\r\n  token_url: 'https://keycloak.example.com/realms/master/protocol/openid-connect/token',\r\n  userinfo_url: 'https://keycloak.example.com/realms/master/protocol/openid-connect/userinfo',\r\n  jwks_uri: 'https://keycloak.example.com/realms/master/protocol/openid-connect/certs',\r\n  scopes: 'openid email profile groups',\r\n  group_attribute: 'groups',\r\n  admin_group: '/spiderfoot-admins',\r\n};\r\n\r\n// ── Component ────────────────────────────────────────────\r\n\r\nexport default function SSOSettingsPage() {\r\n  const [providers, setProviders] = useState<SSOProviderRecord[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [search, setSearch] = useState('');\r\n\r\n  // Modals\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [editProvider, setEditProvider] = useState<SSOProviderRecord | null>(null);\r\n  const [deleteProvider, setDeleteProvider] = useState<SSOProviderRecord | null>(null);\r\n\r\n  // ── Data fetching ──────────────────────────────────────\r\n\r\n  const fetchProviders = useCallback(async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const res = await api.get('/api/auth/sso/providers/all');\r\n      setProviders(res.data.items || []);\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'Failed to load SSO providers');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchProviders();\r\n  }, [fetchProviders]);\r\n\r\n  // Toggle enabled state\r\n  const toggleProvider = async (p: SSOProviderRecord) => {\r\n    try {\r\n      await api.patch(`/api/auth/sso/providers/${p.id}`, { enabled: !p.enabled });\r\n      fetchProviders();\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to toggle provider');\r\n    }\r\n  };\r\n\r\n  // ── Filter ─────────────────────────────────────────────\r\n\r\n  const filtered = providers.filter((p) => {\r\n    if (!search) return true;\r\n    const q = search.toLowerCase();\r\n    return (\r\n      p.name.toLowerCase().includes(q) ||\r\n      p.protocol.toLowerCase().includes(q)\r\n    );\r\n  });\r\n\r\n  // ── Render ─────────────────────────────────────────────\r\n\r\n  return (\r\n    <div>\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n            <Shield className=\"h-7 w-7 text-spider-400\" />\r\n            SSO Settings\r\n          </h1>\r\n          <p className=\"text-dark-400 text-sm mt-1\">\r\n            Configure Single Sign-On providers — OAuth2/OIDC (Keycloak), LDAP, SAML\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowCreate(true)}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-spider-600 hover:bg-spider-500 text-white rounded-lg text-sm font-medium transition-colors\"\r\n        >\r\n          <Plus className=\"h-4 w-4\" />\r\n          Add Provider\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"relative mb-4\">\r\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-dark-500\" />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search providers...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"w-full pl-10 pr-10 py-2.5 bg-dark-800 border border-dark-700 rounded-lg text-sm text-white placeholder:text-dark-500 focus:outline-none focus:ring-2 focus:ring-spider-500/40 focus:border-spider-500/60\"\r\n        />\r\n        {search && (\r\n          <button onClick={() => setSearch('')} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-dark-500 hover:text-dark-300\">\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Error */}\r\n      {error && (\r\n        <div className=\"mb-4 flex items-center gap-2 px-4 py-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm\">\r\n          <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Info about callback URLs */}\r\n      <div className=\"mb-4 px-4 py-3 bg-blue-500/5 border border-blue-500/20 rounded-lg text-sm text-dark-300\">\r\n        <p className=\"font-medium text-blue-400 mb-1\">Callback URLs for IDP configuration</p>\r\n        <p className=\"text-xs text-dark-400\">\r\n          OAuth2 Redirect: <code className=\"text-blue-300 bg-dark-800 px-1 rounded\">{window.location.origin}/api/auth/sso/callback/{'<provider_id>'}</code>\r\n          <br />\r\n          SAML ACS: <code className=\"text-purple-300 bg-dark-800 px-1 rounded\">{window.location.origin}/api/auth/sso/saml/acs/{'<provider_id>'}</code>\r\n        </p>\r\n      </div>\r\n\r\n      {/* Provider Cards */}\r\n      <div className=\"space-y-4\">\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-12 text-dark-500\">\r\n            <div className=\"animate-spin h-5 w-5 border-2 border-spider-500 border-t-transparent rounded-full mr-3\" />\r\n            Loading providers...\r\n          </div>\r\n        ) : filtered.length === 0 ? (\r\n          <div className=\"text-center py-12 text-dark-500\">\r\n            {search ? 'No providers match your search' : 'No SSO providers configured. Click \"Add Provider\" to get started.'}\r\n          </div>\r\n        ) : (\r\n          filtered.map((p) => (\r\n            <div\r\n              key={p.id}\r\n              className={clsx(\r\n                'bg-dark-800 border rounded-xl p-5 transition-colors',\r\n                p.enabled ? 'border-dark-700' : 'border-dark-700/50 opacity-60',\r\n              )}\r\n            >\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {PROTOCOL_ICON[p.protocol]}\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <h3 className=\"text-white font-medium\">{p.name}</h3>\r\n                      <span className={clsx('inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border', PROTOCOL_COLOR[p.protocol] || 'bg-dark-600 text-dark-300 border-dark-600')}>\r\n                        {PROTOCOL_LABELS[p.protocol] || p.protocol}\r\n                      </span>\r\n                      {p.enabled ? (\r\n                        <span className=\"inline-flex items-center gap-1 text-xs text-green-400\">\r\n                          <CheckCircle className=\"h-3 w-3\" /> Active\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"inline-flex items-center gap-1 text-xs text-dark-500\">\r\n                          <XCircle className=\"h-3 w-3\" /> Disabled\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4 mt-1 text-xs text-dark-500\">\r\n                      <span>Default role: <span className=\"text-dark-300 capitalize\">{p.default_role}</span></span>\r\n                      {p.admin_group && (\r\n                        <span>Admin group: <span className=\"text-dark-300\">{p.admin_group}</span></span>\r\n                      )}\r\n                      {p.auto_create_users && (\r\n                        <span className=\"text-green-500/70\">Auto-create users</span>\r\n                      )}\r\n                      {p.allowed_domains && (\r\n                        <span>Domains: <span className=\"text-dark-300\">{p.allowed_domains}</span></span>\r\n                      )}\r\n                    </div>\r\n                    {p.protocol === 'oauth2' && p.client_id && (\r\n                      <div className=\"mt-1 text-xs text-dark-500\">\r\n                        Client ID: <span className=\"text-dark-400 font-mono\">{p.client_id}</span>\r\n                        {p.userinfo_url && (\r\n                          <span className=\"ml-3\">\r\n                            Userinfo: <span className=\"text-dark-400\">{p.userinfo_url}</span>\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    {p.protocol === 'ldap' && p.ldap_url && (\r\n                      <div className=\"mt-1 text-xs text-dark-500\">\r\n                        URL: <span className=\"text-dark-400 font-mono\">{p.ldap_url}</span>\r\n                        <span className=\"ml-3\">Base DN: <span className=\"text-dark-400\">{p.ldap_base_dn}</span></span>\r\n                      </div>\r\n                    )}\r\n                    {p.protocol === 'saml' && p.idp_sso_url && (\r\n                      <div className=\"mt-1 text-xs text-dark-500\">\r\n                        IDP SSO URL: <span className=\"text-dark-400\">{p.idp_sso_url}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <button\r\n                    onClick={() => toggleProvider(p)}\r\n                    className=\"p-1.5 text-dark-500 hover:text-spider-400 hover:bg-dark-700 rounded-lg transition-colors\"\r\n                    title={p.enabled ? 'Disable' : 'Enable'}\r\n                  >\r\n                    {p.enabled ? <ToggleRight className=\"h-5 w-5 text-green-400\" /> : <ToggleLeft className=\"h-5 w-5\" />}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setEditProvider(p)}\r\n                    className=\"p-1.5 text-dark-500 hover:text-spider-400 hover:bg-dark-700 rounded-lg transition-colors\"\r\n                    title=\"Edit provider\"\r\n                  >\r\n                    <Pencil className=\"h-3.5 w-3.5\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setDeleteProvider(p)}\r\n                    className=\"p-1.5 text-dark-500 hover:text-red-400 hover:bg-dark-700 rounded-lg transition-colors\"\r\n                    title=\"Delete provider\"\r\n                  >\r\n                    <Trash2 className=\"h-3.5 w-3.5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {showCreate && (\r\n        <ProviderFormModal\r\n          onClose={() => setShowCreate(false)}\r\n          onSaved={() => { setShowCreate(false); fetchProviders(); }}\r\n        />\r\n      )}\r\n      {editProvider && (\r\n        <ProviderFormModal\r\n          provider={editProvider}\r\n          onClose={() => setEditProvider(null)}\r\n          onSaved={() => { setEditProvider(null); fetchProviders(); }}\r\n        />\r\n      )}\r\n      {deleteProvider && (\r\n        <DeleteProviderModal\r\n          provider={deleteProvider}\r\n          onClose={() => setDeleteProvider(null)}\r\n          onDeleted={() => { setDeleteProvider(null); fetchProviders(); }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// ══════════════════════════════════════════════════════════\r\n// Shared UI Helpers\r\n// ══════════════════════════════════════════════════════════\r\n\r\nfunction ModalShell({ title, onClose, children, wide }: {\r\n  title: string; onClose: () => void; children: React.ReactNode; wide?: boolean;\r\n}) {\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n      <div className={clsx(\r\n        'relative bg-dark-800 border border-dark-700 rounded-2xl p-6 shadow-2xl animate-fade-in-up max-h-[90vh] overflow-y-auto',\r\n        wide ? 'max-w-2xl w-full' : 'max-w-lg w-full',\r\n      )}>\r\n        <div className=\"flex items-center justify-between mb-5\">\r\n          <h2 className=\"text-lg font-bold text-white\">{title}</h2>\r\n          <button onClick={onClose} className=\"text-dark-500 hover:text-dark-300 transition-colors\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FormField({ label, hint, children }: { label: string; hint?: string; children: React.ReactNode }) {\r\n  return (\r\n    <div className=\"space-y-1.5\">\r\n      <label className=\"block text-sm font-medium text-dark-300\">{label}</label>\r\n      {children}\r\n      {hint && <p className=\"text-xs text-dark-500\">{hint}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst inputClass =\r\n  'w-full px-3 py-2 bg-dark-900 border border-dark-600 rounded-lg text-sm text-white placeholder:text-dark-500 focus:outline-none focus:ring-2 focus:ring-spider-500/40 focus:border-spider-500/60';\r\n\r\nconst selectClass =\r\n  'w-full px-3 py-2 bg-dark-900 border border-dark-600 rounded-lg text-sm text-white focus:outline-none focus:ring-2 focus:ring-spider-500/40 focus:border-spider-500/60 appearance-none';\r\n\r\n\r\n// ══════════════════════════════════════════════════════════\r\n// Create / Edit Provider Modal\r\n// ══════════════════════════════════════════════════════════\r\n\r\nfunction ProviderFormModal({\r\n  provider,\r\n  onClose,\r\n  onSaved,\r\n}: {\r\n  provider?: SSOProviderRecord;\r\n  onClose: () => void;\r\n  onSaved: () => void;\r\n}) {\r\n  const isEdit = !!provider;\r\n  const [protocol, setProtocol] = useState(provider?.protocol || 'oauth2');\r\n  const [name, setName] = useState(provider?.name || '');\r\n  const [enabled, setEnabled] = useState(provider?.enabled ?? true);\r\n  const [defaultRole, setDefaultRole] = useState(provider?.default_role || 'viewer');\r\n  const [allowedDomains, setAllowedDomains] = useState(provider?.allowed_domains || '');\r\n  const [autoCreateUsers, setAutoCreateUsers] = useState(provider?.auto_create_users ?? true);\r\n  const [groupAttribute, setGroupAttribute] = useState(provider?.group_attribute || 'groups');\r\n  const [adminGroup, setAdminGroup] = useState(provider?.admin_group || '');\r\n  const [groupRoleMap, setGroupRoleMap] = useState('');\r\n\r\n  // OAuth2\r\n  const [clientId, setClientId] = useState(provider?.client_id || '');\r\n  const [clientSecret, setClientSecret] = useState(provider?.client_secret || '');\r\n  const [authorizationUrl, setAuthorizationUrl] = useState(provider?.authorization_url || '');\r\n  const [tokenUrl, setTokenUrl] = useState(provider?.token_url || '');\r\n  const [userinfoUrl, setUserinfoUrl] = useState(provider?.userinfo_url || '');\r\n  const [jwksUri, setJwksUri] = useState(provider?.jwks_uri || '');\r\n  const [scopes, setScopes] = useState(provider?.scopes || 'openid email profile');\r\n\r\n  // LDAP\r\n  const [ldapUrl, setLdapUrl] = useState(provider?.ldap_url || '');\r\n  const [ldapBindDn, setLdapBindDn] = useState(provider?.ldap_bind_dn || '');\r\n  const [ldapBindPassword, setLdapBindPassword] = useState(provider?.ldap_bind_password || '');\r\n  const [ldapBaseDn, setLdapBaseDn] = useState(provider?.ldap_base_dn || '');\r\n  const [ldapUserFilter, setLdapUserFilter] = useState(provider?.ldap_user_filter || '(uid={username})');\r\n  const [ldapGroupFilter, setLdapGroupFilter] = useState(provider?.ldap_group_filter || '(member={dn})');\r\n  const [ldapTls, setLdapTls] = useState(provider?.ldap_tls ?? true);\r\n\r\n  // SAML\r\n  const [idpEntityId, setIdpEntityId] = useState(provider?.idp_entity_id || '');\r\n  const [idpSsoUrl, setIdpSsoUrl] = useState(provider?.idp_sso_url || '');\r\n  const [spEntityId, setSpEntityId] = useState(provider?.sp_entity_id || '');\r\n  const [spAcsUrl, setSpAcsUrl] = useState(provider?.sp_acs_url || '');\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // Parse existing group_role_map from attribute_mapping\r\n  useEffect(() => {\r\n    if (provider?.attribute_mapping) {\r\n      try {\r\n        const mapping = JSON.parse(provider.attribute_mapping);\r\n        if (mapping.group_role_map) {\r\n          setGroupRoleMap(JSON.stringify(mapping.group_role_map, null, 2));\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n  }, [provider]);\r\n\r\n  const applyKeycloakDefaults = () => {\r\n    setAuthorizationUrl(KEYCLOAK_DEFAULTS.authorization_url);\r\n    setTokenUrl(KEYCLOAK_DEFAULTS.token_url);\r\n    setUserinfoUrl(KEYCLOAK_DEFAULTS.userinfo_url);\r\n    setJwksUri(KEYCLOAK_DEFAULTS.jwks_uri);\r\n    setScopes(KEYCLOAK_DEFAULTS.scopes);\r\n    setGroupAttribute(KEYCLOAK_DEFAULTS.group_attribute);\r\n    setAdminGroup(KEYCLOAK_DEFAULTS.admin_group);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setError('');\r\n\r\n    // Build attribute_mapping JSON with group_role_map\r\n    let attributeMapping = '';\r\n    try {\r\n      const mapping: Record<string, unknown> = {};\r\n      if (groupRoleMap.trim()) {\r\n        mapping.group_role_map = JSON.parse(groupRoleMap);\r\n      }\r\n      if (Object.keys(mapping).length > 0) {\r\n        attributeMapping = JSON.stringify(mapping);\r\n      }\r\n    } catch {\r\n      setError('Group→Role mapping must be valid JSON (e.g. {\"admins\": \"admin\", \"analysts\": \"analyst\"})');\r\n      setSaving(false);\r\n      return;\r\n    }\r\n\r\n    const body: Record<string, unknown> = {\r\n      name,\r\n      protocol,\r\n      enabled,\r\n      default_role: defaultRole,\r\n      allowed_domains: allowedDomains,\r\n      auto_create_users: autoCreateUsers,\r\n      attribute_mapping: attributeMapping,\r\n      group_attribute: groupAttribute,\r\n      admin_group: adminGroup,\r\n    };\r\n\r\n    if (protocol === 'oauth2') {\r\n      Object.assign(body, {\r\n        client_id: clientId,\r\n        client_secret: clientSecret,\r\n        authorization_url: authorizationUrl,\r\n        token_url: tokenUrl,\r\n        userinfo_url: userinfoUrl,\r\n        jwks_uri: jwksUri,\r\n        scopes,\r\n      });\r\n    } else if (protocol === 'ldap') {\r\n      Object.assign(body, {\r\n        ldap_url: ldapUrl,\r\n        ldap_bind_dn: ldapBindDn,\r\n        ldap_bind_password: ldapBindPassword,\r\n        ldap_base_dn: ldapBaseDn,\r\n        ldap_user_filter: ldapUserFilter,\r\n        ldap_group_filter: ldapGroupFilter,\r\n        ldap_tls: ldapTls,\r\n      });\r\n    } else if (protocol === 'saml') {\r\n      Object.assign(body, {\r\n        idp_entity_id: idpEntityId,\r\n        idp_sso_url: idpSsoUrl,\r\n        sp_entity_id: spEntityId,\r\n        sp_acs_url: spAcsUrl,\r\n      });\r\n    }\r\n\r\n    try {\r\n      if (isEdit) {\r\n        await api.patch(`/api/auth/sso/providers/${provider!.id}`, body);\r\n      } else {\r\n        await api.post('/api/auth/sso/providers', body);\r\n      }\r\n      onSaved();\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to save provider');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ModalShell title={isEdit ? `Edit ${provider!.name}` : 'Add SSO Provider'} onClose={onClose} wide>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {error && (\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm\">\r\n            <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* Basic Settings */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <FormField label=\"Provider Name\">\r\n            <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} required className={inputClass} placeholder=\"e.g. Keycloak\" />\r\n          </FormField>\r\n          <FormField label=\"Protocol\">\r\n            <div className=\"relative\">\r\n              <select value={protocol} onChange={(e) => setProtocol(e.target.value)} disabled={isEdit} className={selectClass}>\r\n                {PROTOCOLS.map((p) => <option key={p} value={p}>{PROTOCOL_LABELS[p]}</option>)}\r\n              </select>\r\n              <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-dark-500 pointer-events-none\" />\r\n            </div>\r\n          </FormField>\r\n        </div>\r\n\r\n        {/* Keycloak quick-fill button */}\r\n        {protocol === 'oauth2' && !isEdit && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={applyKeycloakDefaults}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 text-xs text-blue-400 bg-blue-500/10 border border-blue-500/20 rounded-lg hover:bg-blue-500/20 transition-colors\"\r\n          >\r\n            <ExternalLink className=\"h-3 w-3\" /> Fill Keycloak defaults (edit URLs to match your realm)\r\n          </button>\r\n        )}\r\n\r\n        {/* OAuth2 Fields */}\r\n        {protocol === 'oauth2' && (\r\n          <div className=\"space-y-4 pt-2 border-t border-dark-700/50\">\r\n            <p className=\"text-xs text-dark-500 font-medium uppercase tracking-wider\">OAuth2 / OIDC Configuration</p>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"Client ID\">\r\n                <input type=\"text\" value={clientId} onChange={(e) => setClientId(e.target.value)} className={inputClass} placeholder=\"spiderfoot-client\" />\r\n              </FormField>\r\n              <FormField label=\"Client Secret\">\r\n                <input type=\"password\" value={clientSecret} onChange={(e) => setClientSecret(e.target.value)} className={inputClass} placeholder=\"••••••••\" />\r\n              </FormField>\r\n            </div>\r\n            <FormField label=\"Authorization URL\" hint=\"OIDC authorization endpoint\">\r\n              <input type=\"url\" value={authorizationUrl} onChange={(e) => setAuthorizationUrl(e.target.value)} className={inputClass} placeholder=\"https://keycloak.example.com/realms/master/protocol/openid-connect/auth\" />\r\n            </FormField>\r\n            <FormField label=\"Token URL\" hint=\"OIDC token endpoint\">\r\n              <input type=\"url\" value={tokenUrl} onChange={(e) => setTokenUrl(e.target.value)} className={inputClass} placeholder=\"https://keycloak.example.com/realms/master/protocol/openid-connect/token\" />\r\n            </FormField>\r\n            <FormField label=\"Userinfo URL\" hint=\"OIDC userinfo endpoint\">\r\n              <input type=\"url\" value={userinfoUrl} onChange={(e) => setUserinfoUrl(e.target.value)} className={inputClass} placeholder=\"https://keycloak.example.com/realms/master/protocol/openid-connect/userinfo\" />\r\n            </FormField>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"JWKS URI\" hint=\"JSON Web Key Set URL (optional)\">\r\n                <input type=\"url\" value={jwksUri} onChange={(e) => setJwksUri(e.target.value)} className={inputClass} placeholder=\"https://...\" />\r\n              </FormField>\r\n              <FormField label=\"Scopes\" hint=\"Space-separated\">\r\n                <input type=\"text\" value={scopes} onChange={(e) => setScopes(e.target.value)} className={inputClass} placeholder=\"openid email profile groups\" />\r\n              </FormField>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* LDAP Fields */}\r\n        {protocol === 'ldap' && (\r\n          <div className=\"space-y-4 pt-2 border-t border-dark-700/50\">\r\n            <p className=\"text-xs text-dark-500 font-medium uppercase tracking-wider\">LDAP Configuration</p>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"LDAP URL\">\r\n                <input type=\"text\" value={ldapUrl} onChange={(e) => setLdapUrl(e.target.value)} className={inputClass} placeholder=\"ldaps://ldap.example.com:636\" />\r\n              </FormField>\r\n              <FormField label=\"Base DN\">\r\n                <input type=\"text\" value={ldapBaseDn} onChange={(e) => setLdapBaseDn(e.target.value)} className={inputClass} placeholder=\"dc=example,dc=com\" />\r\n              </FormField>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"Bind DN\" hint=\"Service account DN\">\r\n                <input type=\"text\" value={ldapBindDn} onChange={(e) => setLdapBindDn(e.target.value)} className={inputClass} placeholder=\"cn=admin,dc=example,dc=com\" />\r\n              </FormField>\r\n              <FormField label=\"Bind Password\">\r\n                <input type=\"password\" value={ldapBindPassword} onChange={(e) => setLdapBindPassword(e.target.value)} className={inputClass} />\r\n              </FormField>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"User Filter\" hint=\"{username} is replaced\">\r\n                <input type=\"text\" value={ldapUserFilter} onChange={(e) => setLdapUserFilter(e.target.value)} className={inputClass} />\r\n              </FormField>\r\n              <FormField label=\"Group Filter\" hint=\"{dn} is replaced\">\r\n                <input type=\"text\" value={ldapGroupFilter} onChange={(e) => setLdapGroupFilter(e.target.value)} className={inputClass} />\r\n              </FormField>\r\n            </div>\r\n            <label className=\"flex items-center gap-2 text-sm text-dark-300 cursor-pointer\">\r\n              <input type=\"checkbox\" checked={ldapTls} onChange={(e) => setLdapTls(e.target.checked)} className=\"rounded border-dark-600 bg-dark-900 text-spider-600 focus:ring-spider-500/40\" />\r\n              Use TLS (StartTLS)\r\n            </label>\r\n          </div>\r\n        )}\r\n\r\n        {/* SAML Fields */}\r\n        {protocol === 'saml' && (\r\n          <div className=\"space-y-4 pt-2 border-t border-dark-700/50\">\r\n            <p className=\"text-xs text-dark-500 font-medium uppercase tracking-wider\">SAML 2.0 Configuration</p>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"IDP Entity ID\">\r\n                <input type=\"text\" value={idpEntityId} onChange={(e) => setIdpEntityId(e.target.value)} className={inputClass} placeholder=\"https://idp.example.com/saml/metadata\" />\r\n              </FormField>\r\n              <FormField label=\"IDP SSO URL\">\r\n                <input type=\"url\" value={idpSsoUrl} onChange={(e) => setIdpSsoUrl(e.target.value)} className={inputClass} placeholder=\"https://idp.example.com/saml/sso\" />\r\n              </FormField>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField label=\"SP Entity ID\">\r\n                <input type=\"text\" value={spEntityId} onChange={(e) => setSpEntityId(e.target.value)} className={inputClass} placeholder=\"spiderfoot\" />\r\n              </FormField>\r\n              <FormField label=\"SP ACS URL\">\r\n                <input type=\"url\" value={spAcsUrl} onChange={(e) => setSpAcsUrl(e.target.value)} className={inputClass} placeholder={`${window.location.origin}/api/auth/sso/saml/acs/...`} />\r\n              </FormField>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Group → Role Mapping */}\r\n        <div className=\"space-y-4 pt-2 border-t border-dark-700/50\">\r\n          <p className=\"text-xs text-dark-500 font-medium uppercase tracking-wider\">User Provisioning & Role Mapping</p>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <FormField label=\"Default Role\" hint=\"Role assigned to new SSO users\">\r\n              <div className=\"relative\">\r\n                <select value={defaultRole} onChange={(e) => setDefaultRole(e.target.value)} className={selectClass}>\r\n                  {ROLES.map((r) => <option key={r} value={r}>{r.charAt(0).toUpperCase() + r.slice(1)}</option>)}\r\n                </select>\r\n                <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-dark-500 pointer-events-none\" />\r\n              </div>\r\n            </FormField>\r\n            <FormField label=\"Allowed Domains\" hint=\"Comma-separated, empty = all\">\r\n              <input type=\"text\" value={allowedDomains} onChange={(e) => setAllowedDomains(e.target.value)} className={inputClass} placeholder=\"example.com, corp.io\" />\r\n            </FormField>\r\n          </div>\r\n\r\n          <label className=\"flex items-center gap-2 text-sm text-dark-300 cursor-pointer\">\r\n            <input type=\"checkbox\" checked={autoCreateUsers} onChange={(e) => setAutoCreateUsers(e.target.checked)} className=\"rounded border-dark-600 bg-dark-900 text-spider-600 focus:ring-spider-500/40\" />\r\n            Auto-create users on first SSO login\r\n          </label>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <FormField label=\"Group Attribute\" hint=\"Claim name in OIDC userinfo containing groups\">\r\n              <input type=\"text\" value={groupAttribute} onChange={(e) => setGroupAttribute(e.target.value)} className={inputClass} placeholder=\"groups\" />\r\n            </FormField>\r\n            <FormField label=\"Admin Group\" hint=\"Group name that grants admin role\">\r\n              <input type=\"text\" value={adminGroup} onChange={(e) => setAdminGroup(e.target.value)} className={inputClass} placeholder=\"/spiderfoot-admins\" />\r\n            </FormField>\r\n          </div>\r\n\r\n          <FormField label=\"Group → Role Mapping (JSON)\" hint='Map IDP groups to SpiderFoot roles. e.g. {\"analysts\": \"analyst\", \"ops-team\": \"operator\"}'>\r\n            <textarea\r\n              value={groupRoleMap}\r\n              onChange={(e) => setGroupRoleMap(e.target.value)}\r\n              rows={4}\r\n              className={clsx(inputClass, 'font-mono text-xs')}\r\n              placeholder='{\\n  \"sf-analysts\": \"analyst\",\\n  \"sf-operators\": \"operator\",\\n  \"sf-admins\": \"admin\"\\n}'\r\n            />\r\n          </FormField>\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <div className=\"flex items-center justify-between pt-3 border-t border-dark-700/50\">\r\n          <label className=\"flex items-center gap-2 text-sm text-dark-300 cursor-pointer\">\r\n            <input type=\"checkbox\" checked={enabled} onChange={(e) => setEnabled(e.target.checked)} className=\"rounded border-dark-600 bg-dark-900 text-spider-600 focus:ring-spider-500/40\" />\r\n            Enabled\r\n          </label>\r\n          <div className=\"flex gap-3\">\r\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 text-sm text-dark-400 hover:text-dark-200 transition-colors\">\r\n              Cancel\r\n            </button>\r\n            <button type=\"submit\" disabled={saving} className=\"px-4 py-2 bg-spider-600 hover:bg-spider-500 disabled:opacity-50 text-white rounded-lg text-sm font-medium transition-colors\">\r\n              {saving ? 'Saving...' : isEdit ? 'Save Changes' : 'Create Provider'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </ModalShell>\r\n  );\r\n}\r\n\r\n\r\n// ══════════════════════════════════════════════════════════\r\n// Delete Provider Modal\r\n// ══════════════════════════════════════════════════════════\r\n\r\nfunction DeleteProviderModal({\r\n  provider,\r\n  onClose,\r\n  onDeleted,\r\n}: {\r\n  provider: SSOProviderRecord;\r\n  onClose: () => void;\r\n  onDeleted: () => void;\r\n}) {\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleDelete = async () => {\r\n    setDeleting(true);\r\n    setError('');\r\n    try {\r\n      await api.delete(`/api/auth/sso/providers/${provider.id}`);\r\n      onDeleted();\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to delete provider');\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ModalShell title=\"Delete SSO Provider\" onClose={onClose}>\r\n      <div className=\"space-y-4\">\r\n        {error && (\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm\">\r\n            <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\r\n            {error}\r\n          </div>\r\n        )}\r\n        <p className=\"text-dark-300 text-sm\">\r\n          Are you sure you want to delete the SSO provider{' '}\r\n          <span className=\"text-white font-medium\">{provider.name}</span>?\r\n          Users who authenticated via this provider will no longer be able to sign in through SSO.\r\n        </p>\r\n        <div className=\"flex justify-end gap-3 pt-2\">\r\n          <button type=\"button\" onClick={onClose} className=\"px-4 py-2 text-sm text-dark-400 hover:text-dark-200 transition-colors\">\r\n            Cancel\r\n          </button>\r\n          <button onClick={handleDelete} disabled={deleting} className=\"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:opacity-50 text-white rounded-lg text-sm font-medium transition-colors\">\r\n            {deleting ? 'Deleting...' : 'Delete Provider'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </ModalShell>\r\n  );\r\n}\r\n"],"names":["ToggleLeft","createLucideIcon","ToggleRight","PROTOCOLS","ROLES","PROTOCOL_LABELS","PROTOCOL_ICON","jsx","Globe","Server","Lock","PROTOCOL_COLOR","KEYCLOAK_DEFAULTS","SSOSettingsPage","providers","setProviders","useState","loading","setLoading","error","setError","search","setSearch","showCreate","setShowCreate","editProvider","setEditProvider","deleteProvider","setDeleteProvider","fetchProviders","useCallback","res","api","err","_b","_a","useEffect","toggleProvider","p","filtered","q","jsxs","Shield","Plus","Search","e","X","AlertCircle","clsx","CheckCircle","XCircle","Pencil","Trash2","ProviderFormModal","DeleteProviderModal","ModalShell","title","onClose","children","wide","FormField","label","hint","inputClass","selectClass","provider","onSaved","isEdit","protocol","setProtocol","name","setName","enabled","setEnabled","defaultRole","setDefaultRole","allowedDomains","setAllowedDomains","autoCreateUsers","setAutoCreateUsers","groupAttribute","setGroupAttribute","adminGroup","setAdminGroup","groupRoleMap","setGroupRoleMap","clientId","setClientId","clientSecret","setClientSecret","authorizationUrl","setAuthorizationUrl","tokenUrl","setTokenUrl","userinfoUrl","setUserinfoUrl","jwksUri","setJwksUri","scopes","setScopes","ldapUrl","setLdapUrl","ldapBindDn","setLdapBindDn","ldapBindPassword","setLdapBindPassword","ldapBaseDn","setLdapBaseDn","ldapUserFilter","setLdapUserFilter","ldapGroupFilter","setLdapGroupFilter","ldapTls","setLdapTls","idpEntityId","setIdpEntityId","idpSsoUrl","setIdpSsoUrl","spEntityId","setSpEntityId","spAcsUrl","setSpAcsUrl","saving","setSaving","mapping","applyKeycloakDefaults","handleSubmit","attributeMapping","body","ChevronDown","ExternalLink","r","onDeleted","deleting","setDeleting","handleDelete"],"mappings":"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","x_google_ignoreList":[0,1]}
{"version":3,"file":"Tenants-L7CTaGl4.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/credit-card.js","../../../../frontend/src/pages/Tenants.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CreditCard = createLucideIcon(\"CreditCard\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"5\", rx: \"2\", key: \"ynyp8z\" }],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"10\", y2: \"10\", key: \"1b3vmo\" }]\n]);\n\nexport { CreditCard as default };\n//# sourceMappingURL=credit-card.js.map\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { tenantApi } from '../lib/api';\r\nimport { Building2, Users, CreditCard, Plus, Settings, Trash2 } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function TenantsPage() {\r\n  const queryClient = useQueryClient();\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [form, setForm] = useState({ name: '', plan: 'free', max_users: 5, max_scans: 10 });\r\n\r\n  const { data: tenants } = useQuery({ queryKey: ['tenants'], queryFn: tenantApi.list });\r\n  const { data: stats } = useQuery({ queryKey: ['tenant-stats'], queryFn: tenantApi.stats });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: tenantApi.create,\r\n    onSuccess: () => { queryClient.invalidateQueries({ queryKey: ['tenants'] }); setShowCreate(false); },\r\n  });\r\n\r\n  const tenantList = tenants?.tenants ?? [];\r\n\r\n  const planColor = (plan: string) => {\r\n    switch (plan) {\r\n      case 'enterprise': return 'badge-critical';\r\n      case 'professional': return 'badge-high';\r\n      case 'starter': return 'badge-medium';\r\n      default: return 'badge-info';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">Tenant Management</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\" onClick={() => setShowCreate(true)}>\r\n          <Plus className=\"h-4 w-4\" /> New Tenant\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n        <div className=\"card flex items-center gap-3\">\r\n          <Building2 className=\"h-5 w-5 text-spider-400\" />\r\n          <div>\r\n            <p className=\"text-sm text-dark-400\">Total Tenants</p>\r\n            <p className=\"text-xl font-bold text-white\">{stats?.total_tenants ?? tenantList.length}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card flex items-center gap-3\">\r\n          <Users className=\"h-5 w-5 text-blue-400\" />\r\n          <div>\r\n            <p className=\"text-sm text-dark-400\">Total Users</p>\r\n            <p className=\"text-xl font-bold text-white\">{stats?.total_users ?? 0}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card flex items-center gap-3\">\r\n          <CreditCard className=\"h-5 w-5 text-green-400\" />\r\n          <div>\r\n            <p className=\"text-sm text-dark-400\">Paid Tenants</p>\r\n            <p className=\"text-xl font-bold text-white\">{stats?.paid_tenants ?? 0}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card flex items-center gap-3\">\r\n          <Settings className=\"h-5 w-5 text-purple-400\" />\r\n          <div>\r\n            <p className=\"text-sm text-dark-400\">Active Scans</p>\r\n            <p className=\"text-xl font-bold text-white\">{stats?.active_scans ?? 0}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create form */}\r\n      {showCreate && (\r\n        <div className=\"card mb-6 border border-spider-600\">\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">Create Tenant</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm text-dark-300 mb-1\">Tenant Name</label>\r\n              <input className=\"input-field w-full\" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} placeholder=\"Acme Corp\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm text-dark-300 mb-1\">Plan</label>\r\n              <select className=\"input-field w-full\" value={form.plan} onChange={(e) => setForm({ ...form, plan: e.target.value })}>\r\n                {['free', 'starter', 'professional', 'enterprise'].map((p) => (\r\n                  <option key={p} value={p}>{p.charAt(0).toUpperCase() + p.slice(1)}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm text-dark-300 mb-1\">Max Users</label>\r\n              <input className=\"input-field w-full\" type=\"number\" value={form.max_users} onChange={(e) => setForm({ ...form, max_users: +e.target.value })} />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm text-dark-300 mb-1\">Max Scans</label>\r\n              <input className=\"input-field w-full\" type=\"number\" value={form.max_scans} onChange={(e) => setForm({ ...form, max_scans: +e.target.value })} />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-end gap-3 mt-4\">\r\n            <button className=\"btn-secondary\" onClick={() => setShowCreate(false)}>Cancel</button>\r\n            <button className=\"btn-primary\" onClick={() => createMutation.mutate(form)} disabled={!form.name}>Create</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tenant list */}\r\n      <div className=\"space-y-3\">\r\n        {tenantList.map((t: { id: string; name: string; plan: string; user_count: number; scan_count: number; max_users: number; max_scans: number; status: string }) => (\r\n          <div key={t.id} className=\"card flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-2 rounded-lg bg-spider-600/20\">\r\n                <Building2 className=\"h-5 w-5 text-spider-400\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-medium text-white\">{t.name}</h3>\r\n                <div className=\"flex items-center gap-3 mt-1 text-sm text-dark-400\">\r\n                  <span className={`badge ${planColor(t.plan)}`}>{t.plan}</span>\r\n                  <span>{t.user_count}/{t.max_users} users</span>\r\n                  <span>{t.scan_count}/{t.max_scans} scans</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button className=\"text-red-400 hover:text-red-300\"><Trash2 className=\"h-4 w-4\" /></button>\r\n              <span className={`badge ${t.status === 'active' ? 'badge-success' : 'badge-medium'}`}>{t.status}</span>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CreditCard","createLucideIcon","TenantsPage","queryClient","useQueryClient","showCreate","setShowCreate","useState","form","setForm","tenants","useQuery","tenantApi","stats","createMutation","useMutation","tenantList","planColor","plan","jsxs","jsx","Plus","Building2","Users","Settings","e","p","t","Trash2"],"mappings":"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","x_google_ignoreList":[0]}
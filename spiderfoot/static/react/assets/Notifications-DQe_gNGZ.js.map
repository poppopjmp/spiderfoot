{"version":3,"file":"Notifications-DQe_gNGZ.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/history.js","../../../../frontend/node_modules/lucide-react/dist/esm/icons/mail.js","../../../../frontend/node_modules/lucide-react/dist/esm/icons/message-square.js","../../../../frontend/src/pages/Notifications.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst History = createLucideIcon(\"History\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M12 7v5l4 2\", key: \"1fdv2h\" }]\n]);\n\nexport { History as default };\n//# sourceMappingURL=history.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","import { useQuery } from '@tanstack/react-query';\r\nimport { notificationApi } from '../lib/api';\r\nimport { Bell, Plus, History, BarChart3, Zap, Mail, MessageSquare } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function NotificationsPage() {\r\n  const [tab, setTab] = useState<'rules' | 'history' | 'stats'>('rules');\r\n  const { data: rules } = useQuery({ queryKey: ['notification-rules'], queryFn: notificationApi.listRules });\r\n  const { data: history } = useQuery({ queryKey: ['notification-history'], queryFn: () => notificationApi.history({ limit: 50 }) });\r\n  const { data: stats } = useQuery({ queryKey: ['notification-stats'], queryFn: notificationApi.stats });\r\n  const { data: channels } = useQuery({ queryKey: ['notification-channels'], queryFn: notificationApi.channels });\r\n\r\n  const ruleList = rules?.rules ?? [];\r\n  const historyList = history?.history ?? [];\r\n\r\n  const channelIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'email': return <Mail className=\"h-4 w-4\" />;\r\n      case 'slack': case 'discord': case 'teams': return <MessageSquare className=\"h-4 w-4\" />;\r\n      default: return <Zap className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">Notification Rules</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\">\r\n          <Plus className=\"h-4 w-4\" /> Create Rule\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-1 mb-6 bg-dark-800 rounded-lg p-1 w-fit\">\r\n        {[\r\n          { key: 'rules' as const, label: 'Rules', icon: Bell },\r\n          { key: 'history' as const, label: 'History', icon: History },\r\n          { key: 'stats' as const, label: 'Analytics', icon: BarChart3 },\r\n        ].map((t) => (\r\n          <button\r\n            key={t.key}\r\n            onClick={() => setTab(t.key)}\r\n            className={`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${\r\n              tab === t.key ? 'bg-spider-600 text-white' : 'text-dark-300 hover:text-white hover:bg-dark-700'\r\n            }`}\r\n          >\r\n            <t.icon className=\"h-4 w-4\" /> {t.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Rules */}\r\n      {tab === 'rules' && (\r\n        <div className=\"space-y-3\">\r\n          {ruleList.map((r: { id: string; name: string; severity: string; enabled: boolean; channels: { type: string }[]; conditions: { field: string; operator: string; value: string }[] }) => (\r\n            <div key={r.id} className=\"card flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className={`p-2 rounded-lg ${r.enabled ? 'bg-green-600/20' : 'bg-dark-700'}`}>\r\n                  <Bell className={`h-5 w-5 ${r.enabled ? 'text-green-400' : 'text-dark-500'}`} />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-medium text-white\">{r.name}</h3>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <span className={`badge ${\r\n                      r.severity === 'critical' ? 'badge-critical' :\r\n                      r.severity === 'high' ? 'badge-high' :\r\n                      r.severity === 'medium' ? 'badge-medium' : 'badge-low'\r\n                    }`}>{r.severity}</span>\r\n                    {r.channels.map((ch, i) => (\r\n                      <span key={i} className=\"badge badge-info flex items-center gap-1\">\r\n                        {channelIcon(ch.type)} {ch.type}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span className={`badge ${r.enabled ? 'badge-success' : 'badge-info'}`}>\r\n                {r.enabled ? 'Active' : 'Disabled'}\r\n              </span>\r\n            </div>\r\n          ))}\r\n\r\n          {/* Available channels */}\r\n          {channels?.channels && (\r\n            <div className=\"card mt-6\">\r\n              <h3 className=\"text-white font-semibold mb-3\">Available Channels</h3>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {channels.channels.map((ch: { name: string; description: string }) => (\r\n                  <span key={ch.name} className=\"badge badge-info\">{ch.name}</span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* History */}\r\n      {tab === 'history' && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">Recent Notifications</h2>\r\n          {historyList.length > 0 ? (\r\n            <div className=\"space-y-2\">\r\n              {historyList.map((n: { id: string; rule_name: string; channel: string; severity: string; timestamp: string; delivered: boolean }, i: number) => (\r\n                <div key={n.id || i} className=\"flex items-center justify-between p-3 bg-dark-700/50 rounded-lg text-sm\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {channelIcon(n.channel)}\r\n                    <span className=\"text-white\">{n.rule_name}</span>\r\n                    <span className={`badge ${n.severity === 'critical' ? 'badge-critical' : n.severity === 'high' ? 'badge-high' : 'badge-info'}`}>{n.severity}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <span className={`badge ${n.delivered ? 'badge-success' : 'badge-critical'}`}>\r\n                      {n.delivered ? 'Delivered' : 'Failed'}\r\n                    </span>\r\n                    <span className=\"text-dark-500 text-xs\">{n.timestamp}</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-dark-400\">No notification history yet.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats */}\r\n      {tab === 'stats' && stats && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-dark-400\">Total Rules</p>\r\n            <p className=\"text-2xl font-bold text-white\">{stats.total_rules ?? 0}</p>\r\n          </div>\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-dark-400\">Notifications Sent</p>\r\n            <p className=\"text-2xl font-bold text-white\">{stats.total_notifications ?? 0}</p>\r\n          </div>\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-dark-400\">Active Rules</p>\r\n            <p className=\"text-2xl font-bold text-green-400\">{stats.active_rules ?? 0}</p>\r\n          </div>\r\n          <div className=\"card\">\r\n            <p className=\"text-sm text-dark-400\">Rate Limited</p>\r\n            <p className=\"text-2xl font-bold text-orange-400\">{stats.rate_limited ?? 0}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["History","createLucideIcon","Mail","MessageSquare","NotificationsPage","tab","setTab","useState","rules","useQuery","notificationApi","history","stats","channels","ruleList","historyList","channelIcon","type","jsx","Zap","jsxs","Plus","Bell","BarChart3","t","r","ch","i","n"],"mappings":"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","x_google_ignoreList":[0,1,2]}
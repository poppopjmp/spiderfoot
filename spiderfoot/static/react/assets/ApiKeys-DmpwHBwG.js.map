{"version":3,"file":"ApiKeys-DmpwHBwG.js","sources":["../../../../frontend/node_modules/lucide-react/dist/esm/icons/eye-off.js","../../../../frontend/src/pages/ApiKeys.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"EyeOff\", [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { keysApi } from '../lib/api';\r\nimport { Key, Plus, Trash2, Copy, Eye, EyeOff } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function ApiKeysPage() {\r\n  const queryClient = useQueryClient();\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [newKeyName, setNewKeyName] = useState('');\r\n  const [createdKey, setCreatedKey] = useState('');\r\n  const [visibleKeys, setVisibleKeys] = useState<Set<string>>(new Set());\r\n\r\n  const { data, isLoading } = useQuery({ queryKey: ['api-keys'], queryFn: keysApi.list });\r\n\r\n  const createKey = useMutation({\r\n    mutationFn: (name: string) => keysApi.create({ name }),\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['api-keys'] });\r\n      setCreatedKey(data.key || data.api_key || 'Created successfully');\r\n      setNewKeyName('');\r\n    },\r\n  });\r\n\r\n  const revokeKey = useMutation({\r\n    mutationFn: (id: string) => keysApi.revoke(id),\r\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['api-keys'] }),\r\n  });\r\n\r\n  const keys = data?.keys ?? [];\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-white\">API Keys</h1>\r\n        <button className=\"btn-primary flex items-center gap-2\" onClick={() => setShowCreate(true)}>\r\n          <Plus className=\"h-4 w-4\" /> Generate Key\r\n        </button>\r\n      </div>\r\n\r\n      {/* Created key alert */}\r\n      {createdKey && (\r\n        <div className=\"card mb-4 border border-green-600 bg-green-900/20\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-green-400 font-medium text-sm\">API Key Created</p>\r\n              <p className=\"text-xs text-dark-400 mt-1\">Copy this key now — it won't be shown again.</p>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <code className=\"bg-dark-900 px-3 py-1 rounded text-sm text-white font-mono\">{createdKey}</code>\r\n              <button\r\n                className=\"text-spider-400 hover:text-spider-300\"\r\n                onClick={() => navigator.clipboard.writeText(createdKey)}\r\n              >\r\n                <Copy className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Create form */}\r\n      {showCreate && (\r\n        <div className=\"card mb-4 border border-spider-600\">\r\n          <h3 className=\"text-white font-semibold mb-3\">Generate New API Key</h3>\r\n          <form\r\n            className=\"flex gap-3\"\r\n            onSubmit={(e) => { e.preventDefault(); createKey.mutate(newKeyName); }}\r\n          >\r\n            <input\r\n              className=\"input-field flex-1\"\r\n              placeholder=\"Key name (e.g. CI Pipeline, Grafana)\"\r\n              value={newKeyName}\r\n              onChange={(e) => setNewKeyName(e.target.value)}\r\n              required\r\n            />\r\n            <button type=\"submit\" className=\"btn-primary\" disabled={createKey.isPending}>\r\n              {createKey.isPending ? 'Creating...' : 'Create'}\r\n            </button>\r\n            <button type=\"button\" className=\"btn-secondary\" onClick={() => setShowCreate(false)}>Cancel</button>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Keys list */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-white mb-4\">Active Keys</h2>\r\n        {isLoading ? (\r\n          <p className=\"text-dark-400\">Loading...</p>\r\n        ) : keys.length > 0 ? (\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"text-left text-dark-400 border-b border-dark-700\">\r\n                <th className=\"pb-3 font-medium\">Name</th>\r\n                <th className=\"pb-3 font-medium\">Key Prefix</th>\r\n                <th className=\"pb-3 font-medium\">Created</th>\r\n                <th className=\"pb-3 font-medium\">Last Used</th>\r\n                <th className=\"pb-3 font-medium\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-dark-700\">\r\n              {keys.map((k: { id: string; name: string; prefix: string; created_at: string; last_used?: string }) => (\r\n                <tr key={k.id} className=\"hover:bg-dark-700/50\">\r\n                  <td className=\"py-3 text-white flex items-center gap-2\">\r\n                    <Key className=\"h-4 w-4 text-spider-400\" /> {k.name}\r\n                  </td>\r\n                  <td className=\"py-3\">\r\n                    <code className=\"text-dark-300 font-mono text-xs\">\r\n                      {visibleKeys.has(k.id) ? k.prefix + '...' : '••••••••'}\r\n                    </code>\r\n                    <button\r\n                      className=\"ml-2 text-dark-400 hover:text-white\"\r\n                      onClick={() => {\r\n                        const s = new Set(visibleKeys);\r\n                        s.has(k.id) ? s.delete(k.id) : s.add(k.id);\r\n                        setVisibleKeys(s);\r\n                      }}\r\n                    >\r\n                      {visibleKeys.has(k.id) ? <EyeOff className=\"h-3 w-3 inline\" /> : <Eye className=\"h-3 w-3 inline\" />}\r\n                    </button>\r\n                  </td>\r\n                  <td className=\"py-3 text-dark-400\">{k.created_at}</td>\r\n                  <td className=\"py-3 text-dark-400\">{k.last_used || 'Never'}</td>\r\n                  <td className=\"py-3\">\r\n                    <button\r\n                      className=\"text-red-400 hover:text-red-300\"\r\n                      onClick={() => revokeKey.mutate(k.id)}\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p className=\"text-dark-400\">No API keys. Generate one to access the REST API programmatically.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["EyeOff","createLucideIcon","ApiKeysPage","queryClient","useQueryClient","showCreate","setShowCreate","useState","newKeyName","setNewKeyName","createdKey","setCreatedKey","visibleKeys","setVisibleKeys","data","isLoading","useQuery","keysApi","createKey","useMutation","name","revokeKey","id","keys","jsxs","jsx","Plus","Copy","e","k","Key","s","Eye","Trash2"],"mappings":"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","x_google_ignoreList":[0]}
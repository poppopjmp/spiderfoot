import{c as g,r as n,u as d,j as e,A as N,G as u,p as v,s as x,q as b}from"./index-CDiyCJR4.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=g("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function f(){const[l,o]=n.useState(""),[i,h]=n.useState(""),[a,p]=n.useState(null),{data:t}=d({queryKey:["scans"],queryFn:b.list}),{data:r}=d({queryKey:["compare-history"],queryFn:x.history}),{data:c}=d({queryKey:["compare-categories"],queryFn:x.categories}),j=async()=>{if(!l||!i)return;const s=await x.quick({scan_a_id:l,scan_b_id:i});p(s)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Scan Comparison"}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Compare Two Scans"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{className:"input-field flex-1",value:l,onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"",children:"Select Scan A"}),t==null?void 0:t.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.target,")"]},s.id))]}),e.jsx(N,{className:"h-5 w-5 text-dark-400 flex-shrink-0"}),e.jsxs("select",{className:"input-field flex-1",value:i,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"",children:"Select Scan B"}),t==null?void 0:t.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.target,")"]},s.id))]}),e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:j,disabled:!l||!i,children:[e.jsx(u,{className:"h-4 w-4"})," Compare"]})]})]}),a&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Risk Delta"}),e.jsxs("p",{className:`text-2xl font-bold ${a.risk_delta>0?"text-red-400":a.risk_delta<0?"text-green-400":"text-white"}`,children:[a.risk_delta>0?"+":"",a.risk_delta,a.risk_delta>0?e.jsx(v,{className:"h-4 w-4 inline ml-1"}):e.jsx(k,{className:"h-4 w-4 inline ml-1"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Risk Grade"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.risk_grade})]}),e.jsxs("div",{className:"card",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Events Changed"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.jsxs("span",{className:"text-green-400",children:["+",a.added??0]})," / ",e.jsxs("span",{className:"text-red-400",children:["-",a.removed??0]})]})]})]}),a.categories&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Category Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(a.categories).map(([s,m])=>e.jsxs("div",{className:"p-3 bg-dark-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-dark-400 capitalize",children:s}),e.jsxs("p",{className:"text-sm text-white",children:[e.jsxs("span",{className:"text-green-400",children:["+",m.added]})," ",e.jsxs("span",{className:"text-red-400",children:["-",m.removed]})]})]},s))})]})]}),(c==null?void 0:c.categories)&&e.jsxs("div",{className:"card mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Event Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.categories.map(s=>e.jsx("span",{className:"badge badge-info capitalize",children:s},s))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Comparison History"}),((r==null?void 0:r.history)??[]).length>0?e.jsx("div",{className:"space-y-2",children:r.history.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700/30 rounded-lg text-sm",children:[e.jsxs("span",{className:"text-white",children:[s.scan_a," vs ",s.scan_b]}),e.jsxs("span",{className:`font-medium ${s.risk_delta>0?"text-red-400":"text-green-400"}`,children:[s.risk_delta>0?"+":"",s.risk_delta]})]},s.id))}):e.jsx("p",{className:"text-dark-400",children:"No comparisons performed yet."})]})]})}export{f as default};
//# sourceMappingURL=ScanComparison-DOjsHCrO.js.map
